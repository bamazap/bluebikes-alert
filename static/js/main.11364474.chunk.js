(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(t,e,a){t.exports=a(72)},36:function(t,e,a){},56:function(t,e,a){},58:function(t,e,a){},70:function(t,e,a){},72:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(4),l=a.n(o),s=(a(36),a(5)),r=a(6),c=a(8),u=a(7),v=a(9),h=a(10),m=(a(56),a(30)),d=(a(58),function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).state={selectedStation:null,stations:[]},a.handleSelectStation=function(t){a.setState({selectedStation:t}),a.props.onSelectStation(t.value)},a}return Object(v.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this;h.get("https://gbfs.bluebikes.com/gbfs/en/station_information.json").then(function(e){return t.setState({stations:e.data.data.stations.map(function(t){return{value:t,label:t.name}})})})}},{key:"render",value:function(){return i.a.createElement(m.a,{className:"select-station",value:this.state.selectedStation,onChange:this.handleSelectStation,options:this.state.stations})}}]),e}(n.Component)),p=function(t){function e(){return Object(s.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){var t=void 0!==this.props.lat&&void 0!==this.props.lon,e=t?parseFloat(this.props.lat):42.3616357609158,a=t?parseFloat(this.props.lon):-71.0906195640564,n="https://image.maps.api.here.com/mia/1.6/mapview?app_id=U9umRZloTL1NlnFVh5yy&app_code=ysINLh115zGxmmSBeofNNg"+"&w=".concat(600)+"&h=".concat(300)+"&z=14"+"&c=".concat(e,",").concat(a)+(t?"":"&nodot");return i.a.createElement("img",{src:n,alt:"Station on Map"})}}]),e}(n.Component),f=a(29);a(70);function b(t){var e=t.bike,a=t.dock,n={Bikes:void 0!==e?e:-1,Docks:void 0!==a?a:-1};return i.a.createElement("div",{className:"show-counts"},Object.entries(n).map(function(t){var e=Object(f.a)(t,2),a=e[0],n=e[1];return i.a.createElement("div",{className:"count",key:a},i.a.createElement("div",{className:"name"},a),i.a.createElement("div",{className:-1===n?"number hidden":"number"},n))}))}var k=new Audio("bell.wav");var w=function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).state={station:{},pollInterval:NaN,waitInterval:NaN,bike:void 0,dock:void 0},a.handleSelectStation=function(t){t=t||{},a.setState({station:t}),a.poll(t.station_id),a.wait(null)},a}return Object(v.a)(e,t),Object(r.a)(e,[{key:"poll",value:function(t){var e=this;clearInterval(this.state.pollInterval);var a=function(){h.get("https://gbfs.bluebikes.com/gbfs/en/station_status.json").then(function(a){var n=a.data.data.stations.filter(function(e){return e.station_id===t});1===n.length?e.setState({bike:n[0].num_bikes_available,dock:n[0].num_docks_available}):(clearInterval(e.state.pollInterval),e.setState({pollInterval:NaN}))})},n=setInterval(a,15e3);a(),this.setState({pollInterval:n})}},{key:"wait",value:function(t){var e=this;clearInterval(this.state.waitInterval);var a=NaN;if(t){var n=function(){var a;e.state[t]>0&&(k.play(),a="There is now a ".concat(t," available."),"denied"===Notification.permission?alert(a):new Notification(a),e.wait(null))};a=setInterval(n,15e3),n()}this.setState({waitInterval:a})}},{key:"componentDidMount",value:function(){"default"===Notification.permission&&Notification.requestPermission()}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.pollInterval),clearInterval(this.state.waitInterval)}},{key:"render",value:function(){var t=this,e="";0===this.state.bike&&(e="bike"),0===this.state.dock&&(e="dock");var a=!Number.isNaN(this.state.waitInterval);return i.a.createElement("div",{id:"app",className:"flow"},i.a.createElement("header",null,i.a.createElement("h1",null,"BLUEbikes Watcher")),i.a.createElement("main",{className:"flow"},i.a.createElement(d,{onSelectStation:this.handleSelectStation}),i.a.createElement(p,{lat:this.state.station.lat,lon:this.state.station.lon}),i.a.createElement(b,{bike:this.state.bike,dock:this.state.dock}),e?i.a.createElement("button",{onClick:function(){return t.wait(a?null:e)}},a?"Stop waiting":"Wait"," for ",e,"."):i.a.createElement("div",null)))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.11364474.chunk.js.map